<template id="template-stage">
    <style>    
        .stage {
            position: relative;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(black 20%, rgba(0,0,0,0) 20%);
            background-position: 0 0;
            background-size: 10px 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            cursor: -moz-grab;
            cursor: -webkit-grab;
        }

        @keyframes backgroundMotion {
            0%, 100% {
                background-position: 0 0;
            }
            100% {
                background-position: 100% 0;
            }
        }

        .stage__animated {
            animation: backgroundMotion 20s steps(100, end) infinite;
        }
    </style>
    <slot class="stage"></slot>
</template>
<script>
    class DraggableStage extends HTMLElement {
        constructor() {
            super();
            const template = document.getElementById('template-stage');
            const shadowRoot = this.attachShadow({ mode: 'open' });
            shadowRoot.appendChild(template.content.cloneNode(true));

            const stage = shadowRoot.querySelector('.stage');
            document.addEventListener('itemDragged', () => {
                stage.classList.add('stage__animated');
            });
            document.addEventListener('itemDropped', () => {
                stage.classList.remove('stage__animated');
            });
        }
    }

    customElements.define('draggable-stage', DraggableStage);
</script>